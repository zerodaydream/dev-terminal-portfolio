<app-matrix-background />

<!-- ABOUT PAGE TAKES FULLSCREEN -->
<app-about *ngIf="showAbout" class="about-fullscreen fade-in"></app-about>

<!-- NORMAL VIEWPORT WITH PANELS -->
<div class="full-page-container" *ngIf="!showAbout">
  <!-- LEFT PANEL -->
  <div class="left-panel" [ngClass]="{ 'scrollable-projects': showProjects }">

    <!-- Work Experience Timeline -->
    <app-company-timeline *ngIf="workExp && !showProjects && !showResume"></app-company-timeline>

    <!-- Projects Grid -->
    <app-project-grid *ngIf="showProjects && !workExp && !showResume"></app-project-grid>

    <!-- Default Profile View -->
    <ng-container *ngIf="showDefaultProfile">
      <img src="assets/images/dhanush.jpg" class="profile-pic" />
      <h1 class="headline">Hi, I'm Dhanush ðŸ‘‹</h1>
      <p class="typewriter">
        <span>{{ displayedText }}</span><span class="cursor">|</span>
      </p>
    </ng-container>

    <!-- Resume PDF View -->
    <ng-container *ngIf="showResume && !workExp && !showProjects">
      <div class="resume-wrapper">
        <div *ngIf="isLoadingPdf" class="pdf-loader shimmer">Loading PDF...</div>
        <iframe
          [src]="'assets/resume/resume.pdf#view=FitH&toolbar=0&navpanes=0&key=' + resumeKey | safeUrl"
          width="100%"
          height="100%"
          style="border: none; border-radius: 8px;"
          (load)="isLoadingPdf = false"
        ></iframe>
      </div>
    </ng-container>

  </div>

  <!-- RIGHT PANEL (empty partition) -->
  <div class="right-panel"></div>
</div>

<!-- Terminal Icon (Bottom-Right Launcher) -->
<div
  class="terminal-fab"
  (click)="showFloatingTerminal = true"
  *ngIf="!showFloatingTerminal"
>
  <i class="fas fa-terminal"></i>
</div>

<!-- Floating Terminal Overlay -->
<div
  class="floating-terminal-overlay"
  *ngIf="showFloatingTerminal"
  [ngClass]="{ 'minimizing': terminalMinimized }"
>
  <div
    class="floating-terminal"
    [ngClass]="{ 'minimize-transition': terminalMinimized }"
  >
    <app-terminal
      [height]="'80%'"
      (commandIssued)="onTerminalCommand($event)"
    ></app-terminal>
    <button class="close-btn" (click)="closeFloatingTerminal()">Ã—</button>
  </div>
</div>